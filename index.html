<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/style.css">
    <title>Care4 Visualization</title>
  </head>
  <body>
    <main>
      <div id="three-container"></div>
      <div id="options-container">
        <nav>
          <div id="logo">CARE4</div>
          <ul class="functionality">
            
          </ul>
        </nav>
      </div>
    </main>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.min.js"></script>
    <script src="js/orbitControls.js"></script>
    <script src="js/JSONLoader.js"></script>
    <script src="js/ObjectLoader.js"></script>

    <script type="text/javascript">

      const container = document.getElementById('three-container');
      let width = container.offsetWidth;
      let height = container.offsetHeight;
      let scene = new THREE.Scene();
      let camera = new THREE.PerspectiveCamera( 75, width / height, 0.1, 1000 );


      let renderer = new THREE.WebGLRenderer( { antialias: true } );
      renderer.setSize( width, height );

      container.appendChild( renderer.domElement );

      // Resize
      window.addEventListener( 'resize', () => {
        renderer.setSize( container.offsetWidth, container.offsetHeight );
        camera.aspect = container.offsetWidth / container.offsetHeight;
        camera.updateProjectionMatrix();
      } );

      controls = new THREE.OrbitControls( camera, renderer.domElement );

      camera.position.z = 15;

      let loader = new THREE.ObjectLoader();
      let watch;
      loader.load
      (
        'model/apple-watch.json',
        ( object ) => {
            watch = object;
            object.position.z = 0;
            object.rotation.y += 90 * Math.PI / 180;
            scene.add( object );
          }
      );

      const planeGeom = new THREE.PlaneBufferGeometry( 3.9, 3.9, 32 );
      let planeMat = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader( ).load( 'img/landing@3x.png' ), side: THREE.FrontSide } );
      let plane = new THREE.Mesh( planeGeom, planeMat );
      plane.position.z = 4.2;
      plane.position.y = 0.56;
      plane.rotation.x -= 10 * Math.PI / 180;
      scene.add( plane );

      // Draw scene
      let render = () => {
        renderer.render( scene, camera );
      };


      // Run loop (update, render, repeat)
      let loop = () => {

        requestAnimationFrame( loop );

        render();
      };
      loop();

    </script>

  </body>
</html>
